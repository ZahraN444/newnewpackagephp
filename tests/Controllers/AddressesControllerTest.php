<?php

declare(strict_types=1);

/*
 * LobLib
 *
 * This file was automatically generated by APIMATIC v3.0 ( https://www.apimatic.io ).
 */

namespace LobLib\Tests\Controllers;

use Core\TestCase\BodyMatchers\KeysBodyMatcher;
use Core\TestCase\TestParam;
use LobLib\Controllers\AddressesController;
use LobLib\Exceptions;

class AddressesControllerTest extends BaseTestController
{
    /**
     * @var AddressesController AddressesController instance
     */
    protected static $controller;

    /**
     * Setup test class
     */
    public static function setUpBeforeClass(): void
    {
        self::$controller = parent::getClient()->getAddressesController();
    }

    public function testAddressesList()
    {
        // Parameters for the API call
        $limit = 10;
        $beforeAfter = null;
        $mInclude = null;
        $dateCreated = null;
        $metadata = null;

        // Perform API call
        $result = null;
        try {
            $result = self::$controller->addressesList($limit, $beforeAfter, $mInclude, $dateCreated, $metadata);
        } catch (Exceptions\ApiException $e) {
        }

        $headers = [];
        $headers['Content-Type'] = ['application/json', true];

        // Assert result with expected response
        $this->newTestCase($result)
            ->expectStatus(200)
            ->allowExtraHeaders()
            ->expectHeaders($headers)
            ->bodyMatcher(KeysBodyMatcher::init(TestParam::object(
                '{"data":[{"id":"adr_e68217bd744d65c8","description":"Harry - Office","name":"H' .
                'ARRY ZHANG","company":"LOB","phone":"5555555555","email":"harry@lob.com","addre' .
                'ss_line1":"210 KING ST STE 6100","address_line2":null,"address_city":"SAN FRANC' .
                'ISCO","address_state":"CA","address_zip":"94107-1741","address_country":"UNITED' .
                ' STATES","metadata":{},"date_created":"2019-08-12T00:16:00.361Z","date_modified' .
                '":"2019-08-12T00:16:00.361Z","object":"address"},{"id":"adr_asdi2y3riuasasoi","' .
                'description":"Harry - Office","name":"Harry Zhang","company":"Lob","phone":"555' .
                '5555555","email":"harry@lob.com","metadata":{},"address_line1":"370 WATER ST","' .
                'address_line2":"","address_city":"SUMMERSIDE","address_state":"PRINCE EDWARD IS' .
                'LAND","address_zip":"C1N 1C4","address_country":"CANADA","date_created":"2019-0' .
                '9-20T00:14:00.361Z","date_modified":"2019-09-20T00:14:00.361Z","object":"addres' .
                's"}],"object":"list","next_url":"https://api.lob.com/v1/addresses?limit=2&after' .
                '=eyJkYXRlT2Zmc2V0IjoiMjAxOS0wOC0wN1QyMTo1OTo0Ni43NjRaIiwiaWRPZmZzZXQiOiJhZHJfOD' .
                'MwYmYwZWFiZGFhYTQwOSJ9","previous_url":null,"count":2}'
            )))
            ->assert();
    }

    public function testAddressCreate()
    {
        // Parameters for the API call
        $body = TestParam::object('{"description":"Harry - Office","name":"Harry Zhang","company":"Lob","email":"harry@lob.com","phone":"5555555555","address_line1":"210 King St","address_line2":"# 6100","address_city":"San Francisco","address_state":"CA","address_zip":"94107","address_country":"US"}');

        // Perform API call
        $result = null;
        try {
            $result = self::$controller->addressCreate($body);
        } catch (Exceptions\ApiException $e) {
        }

        $headers = [];
        $headers['ratelimit-limit'] = ["", false];
        $headers['ratelimit-remaining'] = ["", false];
        $headers['ratelimit-reset'] = ["", false];
        $headers['Content-Type'] = ['application/json', true];

        // Assert result with expected response
        $this->newTestCase($result)
            ->expectStatus(200)
            ->allowExtraHeaders()
            ->expectHeaders($headers)
            ->bodyMatcher(KeysBodyMatcher::init(TestParam::object(
                '{"id":"adr_d3489cd64c791ab5","description":"Harry - Office","name":"HARRY ZHAN' .
                'G","company":"LOB","phone":"5555555555","email":"harry@lob.com","address_line1"' .
                ':"210 KING ST STE 6100","address_city":"SAN FRANCISCO","address_state":"CA","ad' .
                'dress_zip":"94107","address_country":"UNITED STATES","metadata":{},"date_create' .
                'd":"2017-09-05T17:47:53.767Z","date_modified":"2017-09-05T17:47:53.767Z","objec' .
                't":"address"}'
            )))
            ->assert();
    }
}
